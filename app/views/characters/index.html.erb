<div class="container">
<%= form_with url: characters_path, method: :get, class: "d-flex my-1 search" do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control",
    placeholder: "Find a character"
  %>
  <%= submit_tag "Search", class: "btn btn-warning" %>
<% end %>


<div class="cards">
  <% @characters.each do |character| %>
    <div class="card-trip">
        <img src="<%= cl_image_path character.photos.all.first.nil? ? '' : character.photos.all.first.key, height: 300, width: 400, crop: :fill %>" class="card-img-top img-fluid" alt="...">
          <div class="card-trip-infos">
            <div>
              <h2><%= link_to character.name, character_path(character) %></h2>
              <p><%= character.description %></p>
            </div>
            <h2 class="card-trip-pricing">$ <%= character.price %></h2>
          </div>
    </div>
  <% end %>
</div>

<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
</div>
